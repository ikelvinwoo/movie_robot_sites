id: HDHome
name: HDHome
domain: https://hdhome.org/
encoding: UTF-8
config_url: https://ghproxy.com/https://raw.githubusercontent.com/ikelvinwoo/movie_robot_sites/main/hdhome.yml

login:
  test:
    selector: a[href="logout.php"]

category_mappings:
  # 种子
  - { id: 411, cate_level1: Movie, cate_level2: Movies, cate_level2_desc: "Movies SD" }
  - { id: 412, cate_level1: Movie, cate_level2: Movies, cate_level2_desc: "Movies IPad" }
  - { id: 413, cate_level1: Movie, cate_level2: Movies, cate_level2_desc: "Movies 720p" }
  - { id: 414, cate_level1: Movie, cate_level2: Movies, cate_level2_desc: "Movies 1080p" }
  - { id: 415, cate_level1: Movie, cate_level2: Movies, cate_level2_desc: "Movies REMUX" }
  - { id: 450, cate_level1: Movie, cate_level2: Movies, cate_level2_desc: "Movies Bluray" }
  - { id: 499, cate_level1: Movie, cate_level2: Movies, cate_level2_desc: "Movies UHD Blu-ray" }
  - { id: 416, cate_level1: Movie, cate_level2: Movies, cate_level2_desc: "Movies 2160p" }
  - { id: 417, cate_level1: TV, cate_level2: Documentaries, cate_level2_desc: "Doc SD" }
  - { id: 418, cate_level1: TV, cate_level2: Documentaries, cate_level2_desc: "Doc IPad" }
  - { id: 419, cate_level1: TV, cate_level2: Documentaries, cate_level2_desc: "Doc 720p" }
  - { id: 420, cate_level1: TV, cate_level2: Documentaries, cate_level2_desc: "Doc 1080p" }
  - { id: 421, cate_level1: TV, cate_level2: Documentaries, cate_level2_desc: "Doc REMUX" }
  - { id: 451, cate_level1: TV, cate_level2: Documentaries, cate_level2_desc: "Doc Bluray" }
  - { id: 500, cate_level1: TV, cate_level2: Documentaries, cate_level2_desc: "Doc UHD Blu-ray" }
  - { id: 422, cate_level1: TV, cate_level2: Documentaries, cate_level2_desc: "Doc 2160p" }
  - { id: 423, cate_level1: TV, cate_level2: TV, cate_level2_desc: "TVMusic 720p" }
  - { id: 424, cate_level1: TV, cate_level2: TV, cate_level2_desc: "TVMusic 1080i" }
  - { id: 425, cate_level1: TV, cate_level2: TV, cate_level2_desc: "TVShow SD" }
  - { id: 426, cate_level1: TV, cate_level2: TV, cate_level2_desc: "TVShow IPad" }
  - { id: 471, cate_level1: TV, cate_level2: TV, cate_level2_desc: "TVShow IPad" }
  - { id: 427, cate_level1: TV, cate_level2: TV, cate_level2_desc: "TVShow 720p" }
  - { id: 428, cate_level1: TV, cate_level2: TV, cate_level2_desc: "TVShow 1080i" }
  - { id: 429, cate_level1: TV, cate_level2: TV, cate_level2_desc: "TVShow 1080p" }
  - { id: 430, cate_level1: TV, cate_level2: TV, cate_level2_desc: "TVShow REMUX" }
  - { id: 452, cate_level1: TV, cate_level2: TV, cate_level2_desc: "TVShows Bluray" }
  - { id: 431, cate_level1: TV, cate_level2: TV, cate_level2_desc: "TVShow 2160p" }
  - { id: 432, cate_level1: TV, cate_level2: TV, cate_level2_desc: "TVSeries SD" }
  - { id: 433, cate_level1: TV, cate_level2: TV, cate_level2_desc: "TVSeries IPad" }
  - { id: 434, cate_level1: TV, cate_level2: TV, cate_level2_desc: "TVSeries 720p" }
  - { id: 435, cate_level1: TV, cate_level2: TV, cate_level2_desc: "TVSeries 1080i" }
  - { id: 436, cate_level1: TV, cate_level2: TV, cate_level2_desc: "TVSeries 1080p" }
  - { id: 437, cate_level1: TV, cate_level2: TV, cate_level2_desc: "TVSeries REMUX" }
  - { id: 453, cate_level1: TV, cate_level2: TV, cate_level2_desc: "TVSereis Bluray" }
  - { id: 438, cate_level1: TV, cate_level2: TV, cate_level2_desc: "TVSeries 2160p" }
  - { id: 502, cate_level1: TV, cate_level2: TV, cate_level2_desc: "TVSeries 4K Bluray" }
  - { id: 439, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "Musics APE" }
  - { id: 440, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "Musics FLAC" }
  - { id: 441, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "Musics MV" }
  - { id: 503, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "Musics Bluray" }
  - { id: 442, cate_level1: TV, cate_level2: TV/Sport, cate_level2_desc: "Sports 720p" }
  - { id: 443, cate_level1: TV, cate_level2: TV/Sport, cate_level2_desc: "Sports 1080i" }
  - { id: 444, cate_level1: Anime , cate_level2: TV/Anime, cate_level2_desc: "Anime SD" }
  - { id: 445, cate_level1: Anime , cate_level2: TV/Anime, cate_level2_desc: "Anime IPad" }
  - { id: 446, cate_level1: Anime , cate_level2: TV/Anime, cate_level2_desc: "Anime 720p" }
  - { id: 447, cate_level1: Anime , cate_level2: TV/Anime, cate_level2_desc: "Anime 1080p" }
  - { id: 448, cate_level1: Anime , cate_level2: TV/Anime, cate_level2_desc: "Anime REMUX" }
  - { id: 454, cate_level1: Anime , cate_level2: TV/Anime, cate_level2_desc: "Anime Bluray" }
  - { id: 409, cate_level1: TV, cate_level2: TV, cate_level2_desc: "Misc" }
  - { id: 449, cate_level1: Anime , cate_level2: TV/Anime, cate_level2_desc: "Anime 2160p" }
  - { id: 501, cate_level1: Anime , cate_level2: TV/Anime, cate_level2_desc: "Anime UHD Blu-ray" }
  - { id: 504, cate_level1: TV, cate_level2: TV, cate_level2_desc: "Sports 2160" }

  # LIVE
  - { id: 494, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "Movies Bluray" }
  - { id: 495, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "Doc Bluray" }
  - { id: 469, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "TVMusic 1080i" }
  - { id: 472, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "TVShow 720p" }
  - { id: 473, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "TVShow 1080i" }
  - { id: 474, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "TVShow 1080p" }
  - { id: 475, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "TVShow REMUX" }
  - { id: 496, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "TVShows Bluray" }
  - { id: 476, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "TVShow 2160p" }
  - { id: 477, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "TVSeries SD" }
  - { id: 478, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "TVSeries IPad" }
  - { id: 479, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "TVSeries 720p" }
  - { id: 480, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "TVSeries 1080p" }
  - { id: 481, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "TVSeries REMUX" }
  - { id: 497, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "TVSereis Bluray" }
  - { id: 482, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "TVSeries 2160p" }
  - { id: 483, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "Musics APE" }
  - { id: 484, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "Musics FLAC" }
  - { id: 485, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "Musics MV" }
  - { id: 486, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "Sports 720p" }
  - { id: 487, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "Sports 1080i" }
  - { id: 488, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "Anime SD" }
  - { id: 489, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "Anime IPad" }
  - { id: 490, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "Anime 720p" }
  - { id: 491, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "Anime 1080p" }
  - { id: 492, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "Anime REMUX" }
  - { id: 498, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "Anime Bluray" }
  - { id: 493, cate_level1: Music, cate_level2: Audio/Video, cate_level2_desc: "Anime 2160p" }


userinfo:
  path: https://hdhome.org/index.php
  item:
    selector: table[id="info_block"]
  fields:
    uid:
      default_value: 0
      selector: a[href^="userdetails.php?id="]
      attribute: href
      filters:
        - name: re_search
          args: [ '\d+', 0 ]
    user_group:
      default_value: ''
      selector: a[href^="userdetails.php?id="]
      attribute: class
    username:
      default_value: '未知用户名'
      selector: a[href^="userdetails.php?id="]
    share_ratio:
      default_value: ''
      selector: font[class="color_ratio"]
      method: next_sibling
      filters:
        - name: replace
          args: [ '无限','inf' ]
    uploaded:
      default_value: 0
      selector: font[class="color_uploaded"]
      method: next_sibling
      filters:
        - name: replace
          args: [ '无限','inf' ]
    downloaded:
      default_value: 0
      selector: font[class="color_downloaded"]
      method: next_sibling
      filters:
        - name: replace
          args: [ '无限','inf' ]
    seeding:
      default_value: 0
      selector: img[alt="Torrents seeding"]
      method: next_sibling
    leeching:
      default_value: 0
      selector: img[alt="Torrents leeching"]
      method: next_sibling
    vip_group:
      case:
        a[class^="VIP"]: true
        "*": false
search:
  paths:
    - path: torrents.php
      categories: [ 411, 412, 413, 414, 415, 450, 499, 416, 417, 418, 419, 420, 421, 451, 500, 422, 423, 424, 425, 426, 471, 427, 428, 429, 430, 452, 431, 432, 433, 434, 435, 436, 437, 453, 438, 502, 439, 440, 441, 503, 442, 443, 444, 445, 446, 447, 448, 454, 409, 449, 501, 504 ]
    - path: live.php
      categories: [ 494, 495, 469, 472, 473, 474, 475, 496, 476, 477, 478, 479, 480, 481, 497, 482, 483, 484, 485, 486, 487, 488, 489, 490, 491, 492, 498, 493 ]
  query:
    $raw: "{% for c in query.cates %}cat{{c}}=1&{% endfor %}"
    search: "{% if query.imdb_id %}{{query.imdb_id}}{%else%}{{query.keyword}}{% endif %}"
    # 0 incldead, 1 active, 2 dead
    incldead: 1
    # 0 all, 1 normal, 2 free, 3 2x, 4 2xfree, 5 50%, 6 2x50%, 7 30%
    spstate: "{% if query.free %}2{% else %}0{% endif %}"
    # 0 title, 1 descr, 3 uploader, 4 imdburl (searching imdburl does not work with tt1234567, but descr is good)
    search_area: "{% if query.imdb_id %}4{% else %}0{%endif%}"
    # 0 AND, 1 OR, 2 exact
    search_mode: 0
    sort: "{{ query.sort }}"
    type: "{{ query.type }}"
    page: "{{ query.page }}"

torrents:
  list:
    selector: table.torrents > tr:has(table)
  fields:
    id:
      selector: a[href^="details.php?id="]
      attribute: href
      filters:
        - name: re_search
          args: [ '\d+', 0 ]
    title_default:
      selector: a[href^="details.php?id="]
    title_optional:
      optional: true
      selector: a[title][href^="details.php?id="]
      attribute: title
    title:
      text: "{% if fields['title_optional'] %}{{ fields['title_optional'] }}{% else %}{{ fields['title_default'] }}{% endif %}"
    category:
      selector: a[href^="?cat="]
      attribute: href
      filters:
        - name: replace
          args: [ "?", "" ]
        - name: querystring
          args: cat
    details:
      selector: a[href^="details.php?id="]
      attribute: href
    download:
      selector: a[href^="download.php?id="]
      attribute: href
    imdbid:
      selector: a[href*="imdb.com/title/tt"]
      attribute: href
      filters:
        - name: re_search
          args: [ 'tt\d+',0 ]
    date_elapsed:
      # 站点设置，已去时间 (默认)
      selector: td:nth-child(4) > span[title]
      attribute: title
      optional: true
    date_added:
      # 站点设置，实际时间
      selector: td:nth-child(4):not(:has(span))
      optional: true
    date:
      text: "{% if fields['date_elapsed'] or fields['date_added'] %}{{ fields['date_elapsed'] if fields['date_elapsed'] else fields['date_added'] }}{% else %}now{% endif %}"
      filters:
        - name: dateparse
          args: "%Y-%m-%d %H:%M:%S"
    size:
      selector: td:nth-child(5)
    seeders:
      selector: td:nth-child(6)
    leechers:
      selector: td:nth-child(7)
    grabs:
      selector: td:nth-child(8)
    downloadvolumefactor:
      case:
        img.pro_free: 0
        img.pro_free2up: 0
        img.pro_50pctdown: 0.5
        img.pro_50pctdown2up: 0.5
        img.pro_30pctdown: 0.3
        "*": 1
    uploadvolumefactor:
      case:
        img.pro_50pctdown2up: 2
        img.pro_free2up: 2
        img.pro_2up: 2
        "*": 1
    free_deadline:
      default_value: "{% if fields['downloadvolumefactor']==0 %}{{max_time}}{% endif%}"
      default_value_format: '%Y-%m-%d %H:%M:%S.%f'
      selector: img.pro_free,img.pro_free2up
      attribute: onmouseover
      filters:
        - name: re_search
          args: [ '\d+-\d+-\d+ \d+:\d+:\d+', 0 ]
        - name: dateparse
          args: "%Y-%m-%d %H:%M:%S"
    subject:
      selector: td:nth-child(2) > table > tr > td.embedded
      contents: -1
    tags:
      selectors: td.embedded > span.tags
    description:
      text: "{% if fields['tags']%}{{ fields['subject']+' '+fields['tags']|join(' ') }}{% else %}{{ fields['subject'] }}{% endif %}"
    minimumratio:
      case:
        img.hitandrun: 1
        "*": 0
    minimumseedtime:
      case:
        img.hitandrun: 1296000
        "*": 0